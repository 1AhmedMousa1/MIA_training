# Task 6-1

# MPU6050 Yaw Angle Calculation

This code interfaces with the MPU6050 sensor and retrieves the Yaw angle along the z-axis.

## Requirements

- Arduino board
- MPU6050 sensor
- Wire library

## Code

```c
#include <Wire.h>
const int MPU = 0x68; // MPU6050 I2C address
float GyroZ;
float yaw;
float elapsedTime, currentTime, previousTime;
float GyroErrorZ;

void setup() {
  Wire.begin();
  Wire.beginTransmission(MPU);
  Wire.write(0x6B);
  Wire.write(0x00);
  Wire.endTransmission(true);
  calculate_IMU_error();
}

void loop() {
  previousTime = currentTime;
  currentTime = millis();
  elapsedTime = (currentTime - previousTime) / 1000;

  Wire.beginTransmission(MPU);
  Wire.write(0x47);
  Wire.endTransmission(false);
  Wire.requestFrom(MPU, 2, true);

  GyroZ = (Wire.read() << 8 | Wire.read()) / 131.0;
  GyroZ = GyroZ + GyroErrorZ;

  yaw = yaw + GyroZ * elapsedTime;

  Serial.println(yaw);
}

void calculate_IMU_error() {
    // Code to calibrate the MPU6050 sensor and calculate the error values
}
```

## NOTES

This code was tested using 

[Wokwi - Online ESP32, STM32, Arduino Simulator](https://wokwi.com/)

So there could be some errors if used in a real life projects due to noise 

# Question

> 
> 
> - Q: If the Sensor is surrounded by a noisy environment, what type of
> 
> filter could used and what is the recommended cutoff frequency
> 
> depending on the sensor datasheet?
> 
- Answer
    
    In a noisy environment, we can use a Digital Low Pass Filter (DLPF) and a Kalman filter to reduce noise in the MPU6050 sensor data. The DLPF is built into the MPU6050 and can be configured to different cutoff frequencies depending on your specific application and the amount of noise in your environment. The Kalman filter can further reduce noise in the sensor data and the cutoff frequency can be determined by testing what will be suitable for the project